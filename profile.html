<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profilo - Admin</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/profile.css">
    <link href="assets/bootstrap-icons-1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class="content" id="content">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <a href="index.html" class="list-group-item p-3 border-end-0 text-truncate border-dark"
                data-bs-parent="index.html"><i class="bi bi-house-fill"></i> <span>Home</span></a>
            <a href="statistiche.html" class="list-group-item p-3 border-end-0 text-truncate border-dark"
                data-bs-parent="stats.html"><i class="bi bi-trophy-fill"></i> <span>Statistiche</span></a>
            <a href="consigli.html" class="list-group-item p-3 border-end-0 text-truncate border-dark"
                data-bs-parent="consigli.html"><i class="bi bi-journal-bookmark-fill"></i> <span>Consigli</span></a>
            <a href="profile.html" class="list-group-item p-3 border-end-0 text-truncate border-dark"
                data-bs-parent="profile.html"><i class="bi bi-person-arms-up"></i> <span>Profilo</span></a>
            <a href="calcolatori.html" class="list-group-item p-3 border-end-0 text-truncate border-dark"
                data-bs-parent="settings.html"><i class="bi bi-calculator"></i> <span>Calcolatore</span></a>
            <div class="mt-auto">
                <a href="#" class="list-group-item p-3 border-end-0 text-truncate border-dark" data-bs-parent="#"
                    id="logoutButton">
                    <i class="bi bi-door-open-fill"></i> <span>Logout</span></a>
            </div>
        </div>

        <main class="col ps-md-2 pt-2">

            <!-- Tasto menù -->
            <a href="#" id="toggleButton" data-bs-target="#sidebar" data-bs-toggle="collapse"
                class="toggle-button border rounded-3 p-1 text-decoration-none bg-warning-emphasis border-dark"><i
                    class="bi bi-list bi-lg py-2 p-1"></i>
            </a>

            <div class="container profile mt-5">
                <div class="row">
                    <div class="col-xs-1 text-center mt-2">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title" id="name-display">Clark Kent</h5>
                                <p class="card-text" id="email-display">Email: clark.kent@example.com</p>
                                <p class="card-text" id="peso-display">Peso: 75 kg</p>
                                <p class="card-text" id="altezza-display">Altezza: 180 cm</p>
                                <button type="button" class="btn btn-outline-warning mt-1" data-bs-toggle="modal"
                                    data-bs-target="#editModal"><i class="fa bi-pencil"></i> Modifica
                                    Credenziali</button>
                                <button type="button" class="btn btn-outline-danger mt-1"><i
                                        class="fa bi-box-arrow-right"></i> Logout</button>
                                <button type="button" class="btn btn-danger mt-1"><i class="fa bi-trash"></i>
                                    Elimina Profilo</button>
                            </div>
                        </div>
                    </div>
                    <!--<div class="card shadow mt-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Tabella Attività</h6>
                            <!--<button type="button" class="btn btn-info add-new" data-bs-toggle="modal"
                                data-bs-target="#addUserModal"><i class="fa bi-plus"></i> Aggiungi</button>-->
                        <!--</div>

                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                    <thead class="table-secondary">
                                        <tr>
                                            <th>Tipo</th>
                                            <th>Durata</th>
                                            <th>Distanza</th>
                                            <th>Calorie</th>
                                            <th>Data</th>
                                            <th>Azioni</th>
                                        </tr>
                                    </thead>
                                    <tfoot class="table-secondary">
                                        <tr>
                                            <th>Tipo</th>
                                            <th>Durata</th>
                                            <th>Distanza</th>
                                            <th>Calorie</th>
                                            <th>Data</th>
                                            <th>Azioni</th>
                                        </tr>
                                    </tfoot>
                                    <tbody>
                                        <!--<tr>
                                            <td>Corsa</td>
                                            <td>52</td>
                                            <td>25</td>
                                            <td>990</td>
                                            <td>2024-08-02</td>
                                            <td>
                                                <a class="edit" title="Modifica" data-toggle="tooltip"><i
                                                        class="material-icons">&#xE254;</i></a>
                                                <a class="delete" title="Elimina" data-toggle="tooltip"><i
                                                        class="material-icons">&#xE872;</i></a>
                                            </td>
                                        </tr>-->
                                    <!--</tbody>
                                </table>
                            </div>
                        </div>
                    </div>-->
                </div>
            </div>
        </main>

        <!-- Modal for adding new activity -->
        <div class="modal fade" id="addUserModal" tabindex="-1" data-bs-backdrop="static"
            aria-labelledby="addUserModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addUserModalLabel">Aggiungi Nuova Attività</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="userForm">
                            <div class="form-group">
                                <label for="tipo">Tipo</label>
                                <input type="text" class="form-control" id="tipo" name="tipo" required>
                            </div>
                            <div class="form-group">
                                <label for="durata">Durata</label>
                                <input type="number" class="form-control" id="durata" name="durata" required>
                            </div>
                            <div class="form-group">
                                <label for="distanza">Distanza</label>
                                <input type="number" class="form-control" id="distanza" name="distanza" required>
                            </div>
                            <div class="form-group">
                                <label for="calorie">Calorie</label>
                                <input type="number" class="form-control" id="calorie" name="calorie" required>
                            </div>
                            <div class="form-group">
                                <label for="sportDate">Data</label>
                                <input type="datetime-local" class="form-control" id="sportDate" name="sportDate"
                                    required>
                            </div>
                            <button type="button" class="btn btn-primary mt-2" id="saveUserBtn">Salva</button>
                            <button type="button" class="btn btn-secondary mt-2"
                                data-bs-dismiss="modal">Cancella</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="editModal" tabindex="-1" data-bs-backdrop="static" aria-labelledby="editModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Modifica Credenziali</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-form">
                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome</label>
                            <input type="text" class="form-control" id="nome" value="Clark">
                        </div>
                        <div class="mb-3">
                            <label for="cognome" class="form-label">Cognome</label>
                            <input type="text" class="form-control" id="cognome" value="Kent">
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" value="c.kent@gmail.com">
                        </div>
                        <div class="mb-3">
                            <label for="peso" class="form-label">Peso</label>
                            <input type="text" class="form-control" id="peso" value="82kg">
                        </div>
                        <div class="mb-3">
                            <label for="altezza" class="form-label">Altezza</label>
                            <input type="text" class="form-control" id="altezza" value="185cm">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancella</button>
                    <button type="button" class="btn btn-primary" id="save-changes">Salva</button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Modal -->

    </main>
    </div>
    </div>

    <script src="js/footer.js"></script>
    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/gsap.min.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/logout.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();

            // Show the modal with fade-in effect on add new button click
            $(".add-new").click(function () {
                $("#addUserModal").modal('show');
            });

            // Save user on save button click
            $("#saveUserBtn").click(function () {
                var form = $("#userForm");
                if (form[0].checkValidity()) {
                    var user = {
                        tipo: $("#tipo").val(),
                        durata: $("#durata").val(),
                        distanza: $("#distanza").val(),
                        calorie: $("#calorie").val(),
                        sportDate: $("#sportDate").val(),
                    };

                    var newRow = '<tr>' +
                        '<td>' + user.tipo + '</td>' +
                        '<td>' + user.durata + '</td>' +
                        '<td>' + user.distanza + '</td>' +
                        '<td>' + user.calorie + '</td>' +
                        '<td>' + user.sportDate + '</td>' +
                        '<td>' +
                        '<a class="add" title="Visualizza" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>' +
                        '<a class="edit" title="Modifica" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>' +
                        '<a class="delete" title="Elimina" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>' +
                        '</td>' +
                        '</tr>';

                    $("table tbody").append(newRow);
                    $("#addUserModal").modal('hide');
                    form[0].reset();
                } else {
                    form.addClass('was-validated');
                }
            });

            // Edit row on edit button click
            $(document).on("click", ".edit", function () {
                var $row = $(this).closest("tr");
                var $tds = $row.find("td").not(":last");
                $tds.each(function () {
                    var html = $(this).html();
                    $(this).html('<input type="text" class="form-control" value="' + html + '">');
                });
                $(this).toggleClass("edit confirm").html('<i class="bi bi-check"></i>');
                $(this).siblings(".delete").toggleClass("delete edit-cancel").html('<i class="bi bi-x"></i>');
            });

            // Confirm edit on confirm button click
            $(document).on("click", ".confirm", function () {
                var $row = $(this).closest("tr");
                $row.find("input").each(function () {
                    var val = $(this).val();
                    $(this).parent().text(val);
                });
                $(this).toggleClass("confirm edit").html('<i class="material-icons">&#xE254;</i>');
                $(this).siblings(".edit-cancel").toggleClass("edit-cancel delete").html('<i class="material-icons">&#xE872;</i>');
            });

            // Cancel edit on cancel button click
            $(document).on("click", ".edit-cancel", function () {
                var $row = $(this).closest("tr");
                $row.find("input").each(function () {
                    var val = $(this).val();
                    $(this).parent().text(val);
                });
                $(this).toggleClass("edit-cancel delete").html('<i class="material-icons">&#xE872;</i>');
                $(this).siblings(".confirm").toggleClass("edit confirm").html('<i class="material-icons">&#xE254;</i>');
            });

            // Delete row on delete button click
            $(document).on("click", ".delete", function () {
                if (confirm("Sei sicuro di voler eliminare questo utente?")) {
                    $(this).closest("tr").remove();
                }
            });
        });
    </script>
</body>

</html>